<!DOCTYPE html>
<html lang="en">
    <head>
        <title>Daily Note - 2024-08-25 - Crosscut</title>
        <meta charSet="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link href="/crosscut/style.css" rel="stylesheet">
    </head>
    <body class="max-w-xl mx-auto p-2">
        <header><a href="/crosscut/"><h1>Crosscut</h1></a></header>
        <main>
            <h2>Daily Note - 2024-08-25</h2>
            <div class="m-4 p-4 rounded font-sm bg-slate-200">
                <p class="prose">
                    Hey, I'm Hanno! These are my daily notes on <a
                        href="https://github.com/hannobraun/crosscut"
                        class="text-blue-700 underline font-bold"
                    >Crosscut</a>, the programming language I'm creating. If you
                    have any questions, comments, or feedback, please <a
                        href="mailto:Hanno%20Braun%20%3Chello%40hannobraun.com%3E?subject=&body="
                        class="text-blue-700 underline font-bold"
                    >get in touch</a>!
                </p>
            </div>
            <div class="m-4 p-4 rounded font-sm bg-slate-200">
                <p>
                    This note was published <a
                        href="/crosscut/daily/2024-12-25"
                        class="text-blue-700 underline font-bold"
                    >
                        before Crosscut was called Crosscut</a>! If it refers to
                    "Caterpillar", that is the old name, just so you know.
                </p>
            </div>
            <div class="my-8">
                <nav>
                    <a
                        href="/crosscut/daily"
                        class="text-blue-700 underline font-bold"
                    >< back to list</a>
                </nav>
                <main class="prose">
                    <p>
                        Tail call elimination
                        <a
                            href="/crosscut/daily/2024-08-24"
                            rel="noopener noreferrer"
                        >leaves gaps in the call stack that will confuse the
                            developer</a>, when they're looking at an error in
                        the debugger. For Caterpillar, with its focus on
                        interactivity, immediacy, and intuitiveness, this is an
                        unacceptable trade-off. Fortunately, there seems to be a
                        solution: call stack reconstruction.
                    </p>
                    <p>
                        Let's start with the simple case (which is already
                        implemented): <code>main</code> is the entry point to
                        every Caterpillar program, so if the call stack doesn't
                        start there, you know something's missing. (In the
                        future that will probably depend on the host, but for
                        now it's true. Either way, the debugger only runs when a
                        host is present, so it can rely on host-specific
                        knowledge.)
                    </p>
                    <p>
                        The fix is easy: Just add <code>main</code> to the start
                        of the call stack. The debugger also shows which
                        expression within an active function called the next
                        one, but that's easy too: The stack frame was optimized
                        away by tail call elimination, so
                        <em>it must have been a tail call</em>. We can mark the
                        last expression in <code>main</code> as the active one,
                        and we're done.
                    </p>
                </main>
                <nav class="grid grid-cols-2">
                    <span class="col-1 justify-self-start"><a
                            href="/crosscut/daily/2024-08-24"
                            class="text-blue-700 underline font-bold"
                        ><< previous note</a></span><span
                        class="col-2 justify-self-end"
                    ><a
                            href="/crosscut/daily/2024-08-26"
                            class="text-blue-700 underline font-bold"
                        >next note >></a></span>
                </nav>
            </div>
        </main>
        <hr class="w-1/2 mx-auto my-16">
        <footer class="max-w-fit mx-auto text-sm">
            <p class="max-w-fit mx-auto italic">A website by</p>
            <address>
                <div>
                    Hanno Braun<br>Untere Pfarrgasse 19<br>64720
                    Michelstadt<br>Germany<br>
                </div>
                <div class="my-4">
                    ðŸ“§ <a href="mailto:hello@hannobraun.com"
                    >hello@hannobraun.com</a>
                </div>
            </address>
        </footer>
    </body>
</html>
