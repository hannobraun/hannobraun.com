<!DOCTYPE html>
<html lang="en">
    <head>
        <title>Daily Note - 2024-11-10 - Crosscut</title>
        <meta charSet="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link href="/crosscut/style.css" rel="stylesheet">
    </head>
    <body class="max-w-xl mx-auto p-2">
        <header><a href="/crosscut/"><h1>Crosscut</h1></a></header>
        <main>
            <h2>Daily Note - 2024-11-10</h2>
            <div class="m-4 p-4 rounded font-sm bg-slate-200">
                <p class="prose">
                    Hey, I'm Hanno! These are my daily notes on <a
                        href="https://github.com/hannobraun/crosscut"
                        class="text-blue-700 underline font-bold"
                    >Crosscut</a>, the programming language I'm creating. If you
                    have any questions, comments, or feedback, please <a
                        href="mailto:Hanno%20Braun%20%3Chello%40hannobraun.com%3E?subject=&body="
                        class="text-blue-700 underline font-bold"
                    >get in touch</a>!
                </p>
            </div>
            <div class="m-4 p-4 rounded font-sm bg-slate-200">
                <p>
                    This note was published <a
                        href="/crosscut/daily/2024-12-25"
                        class="text-blue-700 underline font-bold"
                    >
                        before Crosscut was called Crosscut</a>! If it refers to
                    "Caterpillar", that is the old name, just so you know.
                </p>
            </div>
            <div class="my-8">
                <nav>
                    <a
                        href="/crosscut/daily"
                        class="text-blue-700 underline font-bold"
                    >< back to list</a>
                </nav>
                <main class="prose">
                    <p>
                        So yeah, type inference in the presence of recursive
                        function calls
                        <a
                            href="/crosscut/daily/2024-11-09"
                            rel="noopener noreferrer"
                        >is complicated</a>. If you're calling yourself, then
                        during type inference, you encounter the call to
                        yourself before you've figured out your own type. Hence
                        you can't figure out the type of the call, which
                        prevents you from figuring out your own type.
                    </p>
                    <p>
                        The key insight to resolving this contradiction, is that
                        a function consists of multiple branches. If <em
                        >all</em> branches end up calling the function itself,
                        then the function never returns (it <em>diverges</em>).
                        I wrote a compiler pass that detects this relatively
                        easily, using a call graph. We'll see how that holds up,
                        once I've been using it under real conditions for a bit.
                    </p>
                    <p>
                        If <em>some</em> branches diverge while others don't,
                        then it's possible to infer the signature of a function
                        based on its non-diverging branches. The tricky thing
                        is, that you need to infer those branches <em>in the
                            right order</em>. So far, I've failed with a more
                        dynamic solution to this, based on a queue. Too easy to
                        run into endless loops. Now I'm looking into another
                        approach based on a call graph.
                    </p>
                </main>
                <nav class="grid grid-cols-2">
                    <span class="col-1 justify-self-start"><a
                            href="/crosscut/daily/2024-11-09"
                            class="text-blue-700 underline font-bold"
                        ><< previous note</a></span><span
                        class="col-2 justify-self-end"
                    ><a
                            href="/crosscut/daily/2024-11-11"
                            class="text-blue-700 underline font-bold"
                        >next note >></a></span>
                </nav>
            </div>
        </main>
        <hr class="w-1/2 mx-auto my-16">
        <footer class="max-w-fit mx-auto text-sm">
            <p class="max-w-fit mx-auto italic">A website by</p>
            <address>
                <div>
                    Hanno Braun<br>Untere Pfarrgasse 19<br>64720
                    Michelstadt<br>Germany<br>
                </div>
                <div class="my-4">
                    ðŸ“§ <a href="mailto:hello@hannobraun.com"
                    >hello@hannobraun.com</a>
                </div>
            </address>
        </footer>
    </body>
</html>
