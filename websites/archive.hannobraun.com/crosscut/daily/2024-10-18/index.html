<!DOCTYPE html>
<html lang="en">
    <head>
        <title>Daily Note - 2024-10-18 - Crosscut</title>
        <meta charSet="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link href="/crosscut/style.css" rel="stylesheet">
    </head>
    <body class="max-w-xl mx-auto p-2">
        <header><a href="/crosscut/"><h1>Crosscut</h1></a></header>
        <main>
            <h2>Daily Note - 2024-10-18</h2>
            <div class="m-4 p-4 rounded font-sm bg-slate-200">
                <p class="prose">
                    Hey, I'm Hanno! These are my daily notes on <a
                        href="https://github.com/hannobraun/crosscut"
                        class="text-blue-700 underline font-bold"
                    >Crosscut</a>, the programming language I'm creating. If you
                    have any questions, comments, or feedback, please <a
                        href="mailto:Hanno%20Braun%20%3Chello%40hannobraun.com%3E?subject=&body="
                        class="text-blue-700 underline font-bold"
                    >get in touch</a>!
                </p>
            </div>
            <div class="m-4 p-4 rounded font-sm bg-slate-200">
                <p>
                    This note was published <a
                        href="/crosscut/daily/2024-12-25"
                        class="text-blue-700 underline font-bold"
                    >
                        before Crosscut was called Crosscut</a>! If it refers to
                    "Caterpillar", that is the old name, just so you know.
                </p>
            </div>
            <div class="my-8">
                <nav>
                    <a
                        href="/crosscut/daily"
                        class="text-blue-700 underline font-bold"
                    >< back to list</a>
                </nav>
                <main class="prose">
                    <p>
                        Having <a
                            href="/crosscut/daily/2024-10-16"
                            rel="noopener noreferrer"
                        >region-based memory management</a>, and providing
                        different kinds of regions with different memory
                        management strategies, would require having different
                        types of handles for referring into these regions. This
                        implies that <a
                            href="/crosscut/daily/2024-10-17"
                            rel="noopener noreferrer"
                        >we're going to need higher-kinded types</a> to deal
                        with those types.
                    </p>
                    <p>
                        At least that's what I thought. My original plan for
                        today was to explain higher-kinded types and why they're
                        needed. But all I've managed to do is to confuse myself
                        instead.
                    </p>
                    <p>I started with this motivating example in Rust:</p>
                    <pre>
<code>struct Person&lt;H: Handle&gt; {
    name: String,
    parents: [H; 2],
}</code></pre>
                    <p>
                        A person that refers to its parents using some kind of
                        handle. It doesn't care where its parents are stored,
                        meaning it also doesn't care what kind of handle it's
                        using. So it accepts a type parameter <code>H</code> to
                        represent the handle. It only expects that <code
                        >H</code> conforms to a <code>Handle</code> trait (not
                        shown here), that provides some way to access the data
                        it refers to.
                    </p>
                    <p>
                        But this isn't type-safe. The parents would also be
                        <code>Person</code>s, but we don't encode that
                        requirement anywhere. My plan was to use this as a
                        starting point and show how this could be solved with
                        higher-kinded types.
                    </p>
                    <p>Except, I can write this:</p>
                    <pre>
<code>struct Person&lt;H: Handle&lt;Person&lt;H&gt;&gt;&gt; {
    name: String,
    parents: [H; 2],
}

trait Handle&lt;T&gt; {
    fn get(&amp;self) -&gt; &amp;T;
}</code></pre>
                    <p>
                        Which is just regular Rust. And by all accounts, Rust
                        doesn't have higher-kinded types.
                    </p>
                    <p>
                        And now I'm confused about what this is, and why it's
                        not a higher-kinded type, and what exactly higher-kinded
                        types actually are, and whether I have any business
                        working on a programming language. (Probably a firm "no"
                        on that last one, but who cares.)
                    </p>
                    <p>
                        I'm taking this as a sign to take a step back and think
                        about something else for a bit. By the time I get to
                        this part of the language (which likely is a long way
                        off), I might have a better understanding. And even if
                        not, it's important to remember that the goal isn't to
                        implement higher-kinded types. The goal is to make
                        memory management work in the way I need it to.
                    </p>
                </main>
                <nav class="grid grid-cols-2">
                    <span class="col-1 justify-self-start"><a
                            href="/crosscut/daily/2024-10-17"
                            class="text-blue-700 underline font-bold"
                        ><< previous note</a></span><span
                        class="col-2 justify-self-end"
                    ><a
                            href="/crosscut/daily/2024-10-19"
                            class="text-blue-700 underline font-bold"
                        >next note >></a></span>
                </nav>
            </div>
        </main>
        <hr class="w-1/2 mx-auto my-16">
        <footer class="max-w-fit mx-auto text-sm">
            <p class="max-w-fit mx-auto italic">A website by</p>
            <address>
                <div>
                    Hanno Braun<br>Untere Pfarrgasse 19<br>64720
                    Michelstadt<br>Germany<br>
                </div>
                <div class="my-4">
                    ðŸ“§ <a href="mailto:hello@hannobraun.com"
                    >hello@hannobraun.com</a>
                </div>
            </address>
        </footer>
    </body>
</html>
